<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dncompany.mapper.qna.QnaMapper">
    <!--  게시글 삽입  -->
    <insert id="insertQnABoard" parameterType="QnAWriteDTO">
        <selectKey resultType="long" keyProperty="qnaId" order="BEFORE">
            SELECT SEQ_QNA_BOARD.nextval FROM DUAL
        </selectKey>
        INSERT INTO QNA_BOARD (QNA_ID, USERS_ID, QNA_TITLE, QNA_CONTENT)
        VALUES (#{qnaId}, #{userId}, #{qnaTitle}, #{qnaContent})
    </insert>

    <!--  게시글 전체 정보  -->
    <select id="selectAllQnABoards" resultType="QnADTO">
        SELECT QB.QNA_ID, QB.QNA_TITLE, QB.QNA_CONTENT, QB.QNA_UPDATE_AT,
               U.USERS_ID, U.NICKNAME
        FROM QNA_BOARD QB
                 JOIN USERS U ON QB.USERS_ID = U.USERS_ID
        ORDER BY QNA_ID DESC
    </select>
</mapper>