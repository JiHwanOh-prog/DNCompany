<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.dncompany.mapper.help.HelpOfferMapper">
    <!-- 도움 신청하기 -->
    <insert id="insertHelpOffer" parameterType="HelpOfferDTO">
        <selectKey keyProperty="helpOfferId" resultType="long" order="BEFORE">
            SELECT SEQ_HELP_OFFER.nextval FROM DUAL
        </selectKey>
        INSERT INTO HELP_OFFER (
        HELP_OFFER_ID,
        HELP_ID,
        USERS_ID,
        HELP_OFFER_STATUS,
        HELP_OFFER_ENROLL_DATE
        ) VALUES (
        #{helpOfferId},
        #{helpId},
        #{usersId},
        'POSSIBLE',
        SYSDATE
        )
    </insert>

    <!-- 특정 게시글의 도움 신청 목록 조회 -->
    <select id="selectHelpOfferList" resultType="HelpOfferDTO">
        SELECT
            HELP_OFFER_ID,
            HELP_ID,
            USERS_ID,
            HELP_OFFER_STATUS,
            HELP_OFFER_ENROLL_DATE
        FROM HELP_OFFER
        WHERE HELP_ID = #{helpId}
        ORDER BY HELP_OFFER_ENROLL_DATE DESC
    </select>
</mapper>